

<script src="/scripts/jquery-3.3.1.slim.min.js"></script>
<script src="/scripts/retina.min.js"></script>

<!-- Nav bar scroll adaptation -->
<script type="text/javascript">
	var navBar = $('.nav');
	var upperNav = $('.nav-upper');
	var lowerNav = $('.nav-lower');
	var bannerImage = $('.nav .banner-image');
	var toolbarTitle = $('.nav a.logo span');
	var condensedHeight = 64;
	var fullHeight = navBar.height();
	var heightDiff = fullHeight - condensedHeight;

	function adjustNavBar() {
		fullHeight = navBar.height();
		heightDiff = fullHeight - condensedHeight;
		
		var scrollDistance = $(document).scrollTop();
		var offsetDistance = Math.min(heightDiff, scrollDistance);
    	var yRatio = Math.min(1, scrollDistance / heightDiff);

		upperNav.css('transform', 'translate3d(0,' + (1 - yRatio) * 20 + 'px,0)');
		bannerImage.css('opacity',(1 - yRatio) / 3);
		lowerNav.css('opacity', 1 - yRatio * 2);

		toolbarTitle.css('opacity', Math.pow(yRatio, 4));
	}

	adjustNavBar();
	setInterval(adjustNavBar, 10);
</script>

<!-- "Aero Glass" style buttons (thanks Windows 7) -->
<script type="text/javascript">
	var mouseX;
	var currentEl;

	function recordMousePosition(e) {
		mouseX = e.pageX;
		currentEl = e.currentTarget;
	}

	function doColorHotTrack() {
		if(currentEl) {
			var target = $(currentEl);
			let offsetX = mouseX - (target.offset().left + target.width());
			let offsetY = 0;
			target.find(".color_hot_track").css('transform', 'translate3d(' + offsetX + 'px,' + offsetY + 'px, 0)');
		}
	}

	$('.glass_effect').append('<div class="color_hot_track"></div>');
	$('.glass_effect').mousemove(recordMousePosition);
	
	setInterval(doColorHotTrack, 100);
</script>


<!-- Probably Outmoded Naive E-Mail Obfucation -->
<script type="text/javascript">
	$(document).ready(function () {
		var a = {'gmail': 'dan', 'com': 'tilden', '@': '.'};
		var b = "";
		b += a[Object.getOwnPropertyNames(a)[0]];
		b += a[Object.getOwnPropertyNames(a)[2]];
		b += a[Object.getOwnPropertyNames(a)[1]];
		b += Object.getOwnPropertyNames(a)[2];
		b += Object.getOwnPropertyNames(a)[0];
		b += a[Object.getOwnPropertyNames(a)[2]];
		b += Object.getOwnPropertyNames(a)[1];
		$('#email_link').attr('href', 'mailto:' + b);
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18252375-1', 'auto');
  ga('send', 'pageview');

</script>
