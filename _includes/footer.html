

<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="/scripts/retina.min.js"></script>

<script>
	var navBar = $('.nav');
	var upperNav = $('.nav-upper');
	var lowerNav = $('.nav-lower');
	var bannerImage = $('.nav .banner-image');
	var toolbarTitle = $('.nav a.logo span');
	var fullHeight = 192;
	var condensedHeight = 64;
	var heightDiff = fullHeight - condensedHeight;

	function adjustNavBar() {
		var scrollDistance = $(document).scrollTop();
    var yRatio = Math.min(1, scrollDistance / heightDiff);

		navBar.css('height', (1 - yRatio) * heightDiff + condensedHeight);
		upperNav.css('padding-top', (1 - yRatio) * 20);
		bannerImage.css('opacity', 1 - yRatio);
		lowerNav.css('opacity', 1 - yRatio * 3);

		toolbarTitle.css('opacity', Math.pow(yRatio, 4));
	}

	$('document').ready(function() {
		adjustNavBar();
		setInterval(adjustNavBar, 10);
	});
</script>

<script type="text/javascript">
	$(document).ready(function () {
		// simple email encoder; we'll just hope spambots can't parse JS...
		var a = {'gmail': 'dan', 'com': 'tilden', '@': '.'};
		var b = "";
		b += a[Object.getOwnPropertyNames(a)[0]];
		b += a[Object.getOwnPropertyNames(a)[2]];
		b += a[Object.getOwnPropertyNames(a)[1]];
		b += Object.getOwnPropertyNames(a)[2];
		b += Object.getOwnPropertyNames(a)[0];
		b += a[Object.getOwnPropertyNames(a)[2]];
		b += Object.getOwnPropertyNames(a)[1];
		$('#email_link').attr('href', 'mailto:' + b);
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18252375-1', 'auto');
  ga('send', 'pageview');

</script>
